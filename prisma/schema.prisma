generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  // url      = env("DATABASE_URL")
}

model User {
  id                String   @id @default(auto()) @map("_id") @db.ObjectId
  
  uid1              String   @unique @default(cuid()) 
  uid2              String?
  uid3              String?
  
  fullName          String
  companyName       String
  designation       String   @default("Manager")
  role              Role     @default(Manager)
  mobileNumber      String   @unique
  email             String   @unique
  password          String

  currentOtp        Int?     
  otpCount          Int      @default(0)
  otpHistory        OtpAttempt[]

  buildingNumber    String?
  areaName          String?
  landmark          String?
  city              String?
  state             String?
  country           String   @default("India")
  pinCode           String?

  gstNumber         String?
  panNumber         String?
  panFrontImage     String?  
  aadhaarNumber     String?
  aadhaarFrontImage String?
  aadhaarBackImage  String?

  bankAccountNumber String?
  ifscCode          String?
  bankName          String?
  accountHolderName String?  

  vendorPending     Boolean  @default(true)
  vendorApproved    Boolean  @default(false)
  vendorVerified    Boolean  @default(false)
  vendorBlocked     Boolean  @default(false)
  vendorDeleted     Boolean  @default(false)
  vendorTechIssue   Boolean  @default(false)

  isConfirmed       Boolean  @default(false)
  isLoading         Boolean  @default(false)
  isInTransit       Boolean  @default(false)
  isUnloading       Boolean  @default(false)
  isDelivered       Boolean  @default(false)
  isInvoiced        Boolean  @default(false)
  isPaid            Boolean  @default(false)

  loginHistory      LoginRecord[]
  createdAt         DateTime @default(now())
}

type OtpAttempt {
  code      Int
  type      String
  createdAt DateTime @default(now())
}

type LoginRecord {
  deviceInfo String
  loggedInAt DateTime @default(now())
}

enum Role {
  Founder
  CEO
  Manager
  Admin
  TechnicalSupport
  Consignor
  Consignee
}
